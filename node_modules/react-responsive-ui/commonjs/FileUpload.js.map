{"version":3,"sources":["../source/FileUpload.js"],"names":["PureComponent","Component","FileUpload","state","draggedOver","onClick","event","props","disabled","preventDefault","fileInput","click","onKeyDown","ctrlKey","altKey","shiftKey","metaKey","keyCode","setDraggedOver","setState","storeFileInputRef","ref","required","error","tabIndex","onChange","multiple","accept","style","className","children","action","propTypes","func","bool","string","number","isRequired","node","object","defaultProps"],"mappings":"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","file":"FileUpload.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\n\r\nimport { DropFiles } from './DragAndDrop'\r\nimport FileUploadInput from './FileUploadInput'\r\n\r\nimport { submitFormOnCtrlEnter } from './utility/dom'\r\n\r\n// `PureComponent` is only available in React >= 15.3.0.\r\nconst PureComponent = React.PureComponent || React.Component\r\n\r\nexport default class FileUpload extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// On file(s) chosen.\r\n\t\tonChange  : PropTypes.func,\r\n\r\n\t\t// (deprecated, use `onChange` instead).\r\n\t\t// On file(s) chosen.\r\n\t\taction    : PropTypes.func,\r\n\r\n\t\t// Allows choosing multiple files if `true`.\r\n\t\tmultiple  : PropTypes.bool,\r\n\r\n\t\t// Can be used to restrict the file MIME-types or extensions available for selection.\r\n\t\t// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#attr-accept\r\n\t\taccept: PropTypes.string,\r\n\r\n\t\t// Disables the file input.\r\n\t\tdisabled  : PropTypes.bool,\r\n\r\n\t\t// `onClick` handler.\r\n\t\tonClick   : PropTypes.func,\r\n\r\n\t\t// Whether choosing a file is required.\r\n\t\trequired : PropTypes.bool,\r\n\r\n\t\t// Renders an error message below the `<input/>`.\r\n\t\terror     : PropTypes.string,\r\n\r\n\t\ttabIndex  : PropTypes.number.isRequired,\r\n\r\n\t\t// The clickable area, like \"Click here to choose a file\".\r\n\t\tchildren  : PropTypes.node,\r\n\r\n\t\t// CSS class\r\n\t\tclassName : PropTypes.string,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle     : PropTypes.object\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\ttabIndex : 0\r\n\t}\r\n\r\n\tstate =\r\n\t{\r\n\t\tdraggedOver : false\r\n\t}\r\n\r\n\tonClick = (event) => {\r\n\t\tconst {\r\n\t\t\tdisabled,\r\n\t\t\tonClick\r\n\t\t} = this.props\r\n\t\tif (disabled) {\r\n\t\t\tif (event) {\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t}\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (onClick) {\r\n\t\t\tonClick()\r\n\t\t}\r\n\t\tthis.fileInput.click()\r\n\t}\r\n\r\n\tonKeyDown = (event) => {\r\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tswitch (event.keyCode) {\r\n\t\t\t// \"Enter\".\r\n\t\t\tcase 13:\r\n\t\t\t// Spacebar.\r\n\t\t\tcase 32:\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t\t// Emulate `:active` on key press.\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\t// \tif (this._isMounted) {\r\n\t\t\t\t// \t\tthis.setState({\r\n\t\t\t\t// \t\t\tisActive: true\r\n\t\t\t\t// \t\t})\r\n\t\t\t\t// \t}\r\n\t\t\t\t// })\r\n\t\t\t\treturn this.onClick()\r\n\t\t}\r\n\t}\r\n\r\n\tsetDraggedOver = (draggedOver) => this.setState({ draggedOver })\r\n\r\n\tstoreFileInputRef = (ref) => this.fileInput = ref\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\trequired,\r\n\t\t\terror,\r\n\t\t\tdisabled,\r\n\t\t\ttabIndex,\r\n\t\t\tonChange,\r\n\t\t\tmultiple,\r\n\t\t\taccept,\r\n\t\t\tstyle,\r\n\t\t\tclassName,\r\n\t\t\tchildren\r\n\t\t} = this.props\r\n\r\n\t\tconst { draggedOver } = this.state\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tstyle={ style }\r\n\t\t\t\tclassName={ classNames('rrui__file-upload', className) }>\r\n\r\n\t\t\t\t{/* Hidden. */}\r\n\t\t\t\t{/* \"action\" property is deprecated. */}\r\n\t\t\t\t<FileUploadInput\r\n\t\t\t\t\tref={ this.storeFileInputRef }\r\n\t\t\t\t\tmultiple={ multiple }\r\n\t\t\t\t\tonChange={ onChange || this.props.action }\r\n\t\t\t\t\terror={ error }\r\n\t\t\t\t\trequired={ required }\r\n\t\t\t\t\tdisabled={ disabled }\r\n\t\t\t\t\taccept={ accept }\r\n\t\t\t\t\taria-label={ this.props['aria-label'] }/>\r\n\r\n\t\t\t\t<DropFiles\r\n\t\t\t\t\trole=\"button\"\r\n\t\t\t\t\ttabIndex={ tabIndex }\r\n\t\t\t\t\taria-label={ this.props['aria-label'] }\r\n\t\t\t\t\taccept={ accept }\r\n\t\t\t\t\tmultiple={ multiple }\r\n\t\t\t\t\tonDrop={ onChange }\r\n\t\t\t\t\tonClick={ this.onClick }\r\n\t\t\t\t\tonKeyDown={ this.onKeyDown }\r\n\t\t\t\t\tsetDraggedOver={ this.setDraggedOver }\r\n\t\t\t\t\tclassName={ classNames(\r\n\t\t\t\t\t\t/* Developers should define `:focus` styles for `<FileUpload/>`s. */\r\n\t\t\t\t\t\t'rrui__outline',\r\n\t\t\t\t\t\t'rrui__file-upload__area',\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'rrui__file-upload__area--disabled' : disabled,\r\n\t\t\t\t\t\t\t'rrui__file-upload__area--invalid' : error,\r\n\t\t\t\t\t\t\t'rrui__file-upload__area--dragged-over' : draggedOver\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t) }>\r\n\t\t\t\t\t{ children }\r\n\t\t\t\t</DropFiles>\r\n\r\n\t\t\t\t{/* Error message (e.g. \"Required\"). */}\r\n\t\t\t\t{ error &&\r\n\t\t\t\t\t<div className=\"rrui__input-error\">\r\n\t\t\t\t\t\t{ error }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}"]}